<div class="d-flex justify-content-center align-items-center" style="min-height:70vh;">
    <div class="card shadow-lg border-0 rounded-4" style="width: 400px;">
        <div class="card-body p-4">
            <h3 class="text-center mb-4">🔐 Login</h3>

            <form id="loginForm">
                <div class="mb-3">
                    <label for="loginUsername" class="form-label">Username</label>
                    <input type="text" class="form-control" id="loginUsername" placeholder="Enter Username" required />
                </div>

                <div class="mb-3">
                    <label for="loginPassword" class="form-label">Password</label>
                    <input type="password" class="form-control" id="loginPassword" placeholder="Enter Password" required />
                </div>

                <div class="d-flex justify-content-between mb-3">
                    <a href="/Account/ForgotPassword" class="text-decoration-none small">Forgot Password?</a>
                </div>

                <button type="button" class="btn btn-primary w-100 mb-3" onclick="login()">Login</button>

                <div class="text-center">
                    <span class="small">Not a member?</span>
                    <a href="/Account/Register" class="text-decoration-none">Sign up now</a>
                </div>
            </form>

            <div id="loginMessage" class="mt-3 text-center text-danger fw-semibold"></div>
        </div>
    </div>
</div>

<script>
    function login() {
        const username = document.getElementById('loginUsername').value;
        const password = document.getElementById('loginPassword').value;

        fetch('/Account/Login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username, password })
        })
        .then(res => res.json())
        .then(msg => {
            const msgBox = document.getElementById('loginMessage');
            msgBox.innerText = msg;

            if (msg === "Success") {
                msgBox.classList.remove("text-danger");
                msgBox.classList.add("text-success");
                setTimeout(() => {
                    window.location.href = '/Item/Item';
                }, 1000);
            } else {
                msgBox.classList.remove("text-success");
                msgBox.classList.add("text-danger");
            }
        });
    }

    window.onload = function () {
        document.getElementById('loginUsername')?.focus();
    }
</script>
