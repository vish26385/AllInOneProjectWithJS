@model AllInOneProject.ViewModels.PurchaseViewModel

<div class="card shadow-sm mb-4 p-3">
    <div class="form-row" style="display: flex; flex-wrap: wrap; gap: 5px; align-items: center;">

        <!-- Hidden CalcSource -->
        <input type="hidden" id="CalcSource" name="purchaseMaster.CalcSource" value="" />

        <!-- Code -->
        <div class="form-group" style="display: flex; align-items: center; gap:4px;">
            <label class="form-label mb-1">Code</label>
            <input type="number" class="form-control" readonly name="purchaseMaster.Id" value="@Model.purchaseMaster.Id" style="width:120px;" />
        </div>

        <!-- Date -->
        <div class="form-group" style="display: flex; align-items: center; gap:4px;">
            <label class="form-label mb-1">Date</label>
            <input type="date" class="form-control" name="purchaseMaster.PurchaseDate" value="@Model.purchaseMaster.PurchaseDate.ToString("yyyy-MM-dd")" style="width:160px;" />
        </div>

        <!-- Party -->
        <div class="form-group" style="display: flex; align-items: center; gap:4px;">
            <label class="form-label mb-1">Party</label>
            <select class="form-select" name="purchaseMaster.PartyMasterId" style="width:200px;">
                <option value="0">-- Select Party --</option>
                @foreach (var item in Model.partyMasters)
                {
                    if (Model.purchaseMaster?.PartyMasterId == item.Id)
                    {
                        <option value="@item.Id" selected>@item.Name</option>
                    }
                    else
                    {
                        <option value="@item.Id">@item.Name</option>
                    }
                }
            </select>
        </div>

        <!-- Save / Update Button -->
        <div class="form-group" style="display: flex; align-items: center; gap:4px;">
            <label class="form-label mb-1">&nbsp;</label>
            @if (Model != null && Model.purchaseMaster.Id > 0)
            {
                <button type="submit" formaction="/Purchase/UpdatePurchase" class="btn btn-primary d-flex align-items-center gap-2">
                    <i class="bi bi-arrow-repeat"></i> Update
                </button>
            }
            else
            {
                <button type="submit" formaction="/Purchase/SavePurchase" class="btn btn-success d-flex align-items-center gap-2">
                    <i class="bi bi-save"></i> Save
                </button>
            }
        </div>
    </div>
</div>

<style>
    .form-label {
        font-weight: 600;
    }

    @@media (max-width: 768px) {
        .form-row {
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
        }

        .form-group {
            width: 100%;
        }
    }

    .card {
        border-radius: 12px;
    }
</style>
